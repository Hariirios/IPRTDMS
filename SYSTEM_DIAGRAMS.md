# IPRT System Diagrams & Visual Documentation

## Table of Contents
1. [High-Level System Architecture](#high-level-system-architecture)
2. [User Flow Diagrams](#user-flow-diagrams)
3. [Database Schema Diagram](#database-schema-diagram)
4. [Component Interaction Diagram](#component-interaction-diagram)
5. [Deployment Diagram](#deployment-diagram)

---

## 1. High-Level System Architecture

```
┌─────────────────────────────────────────────────────────────────────┐
│                         IPRT SYSTEM ARCHITECTURE                     │
└─────────────────────────────────────────────────────────────────────┘

                              ┌──────────────┐
                              │   Internet   │
                              │    Users     │
                              └──────┬───────┘
                                     │
                    ┌────────────────┼────────────────┐
                    │                │                │
              ┌─────▼─────┐   ┌─────▼─────┐   ┌─────▼─────┐
              │   Public   │   │   Admin   │   │  Member   │
              │   Users    │   │   Users   │   │   Users   │
              └─────┬──────┘   └─────┬─────┘   └─────┬─────┘
                    │                │                │
                    └────────────────┼────────────────┘
                                     │
                         ┌───────────▼───────────┐
                         │   Vercel CDN/Edge     │
                         │   (Frontend Hosting)  │
                         └───────────┬───────────┘
                                     │
                    ┌────────────────┼────────────────┐
                    │                │                │
            ┌───────▼────────┐ ┌────▼────────┐ ┌────▼────────┐
            │  React SPA     │ │  Static     │ │  Serverless │
            │  Application   │ │  Assets     │ │  Functions  │
            └───────┬────────┘ └─────────────┘ └─────────────┘
                    │
                    │ API Calls
                    │
            ┌───────▼────────────────────────────────────┐
            │         Supabase Backend                   │
            ├────────────────────────────────────────────┤
            │  ┌──────────────┐  ┌──────────────┐       │
            │  │ PostgreSQL   │  │ Auth Service │       │
            │  │  Database    │  │   (JWT)      │       │
            │  └──────────────┘  └──────────────┘       │
            │  ┌──────────────┐  ┌──────────────┐       │
            │  │  Real-time   │  │   Storage    │       │
            │  │   Engine     │  │   Service    │       │
            │  └──────────────┘  └──────────────┘       │
            └────────────────────────────────────────────┘
```

---

## 2. User Flow Diagrams

### 2.1 Admin Login Flow
```
┌─────────────────────────────────────────────────────────────┐
│                    ADMIN LOGIN FLOW                          │
└─────────────────────────────────────────────────────────────┘

    Start
      │
      ▼
┌──────────────┐
│ Visit /admin │
└──────┬───────┘
       │
       ▼
┌──────────────────┐
│ Select User Type │
│  ○ Admin         │
│  ○ Member        │
└──────┬───────────┘
       │
       ▼ (Admin selected)
┌──────────────────────┐
│ Enter Credentials    │
│ - Email/Username     │
│ - Password           │
└──────┬───────────────┘
       │
       ▼
┌──────────────────────┐
│ Submit Login Form    │
└──────┬───────────────┘
       │
       ▼
┌──────────────────────┐
│ loginAdmin()         │
│ (lib/auth.ts)        │
└──────┬───────────────┘
       │
       ▼
┌──────────────────────┐
│ Supabase Auth        │
│ signInWithPassword() │
└──────┬───────────────┘
       │
       ├─── Error ──────► Show Error Message
       │                        │
       │                        ▼
       │                  ┌──────────────┐
       │                  │ Stay on      │
       │                  │ Login Page   │
       │                  └──────────────┘
       │
       ▼ Success
┌──────────────────────┐
│ Verify in            │
│ admin_users table    │
└──────┬───────────────┘
       │
       ├─── Not Found ──► Show Error Message
       │
       ▼ Found
┌──────────────────────┐
│ Check is_active      │
└──────┬───────────────┘
       │
       ├─── Inactive ───► Show Error Message
       │
       ▼ Active
┌──────────────────────┐
│ Update last_login    │
└──────┬───────────────┘
       │
       ▼
┌──────────────────────┐
│ Store in localStorage│
│ - currentAdminId     │
│ - currentAdminEmail  │
│ - currentAdminRole   │
└──────┬───────────────┘
       │
       ▼
┌──────────────────────┐
│ Show Success Toast   │
│ "Welcome [username]!"│
└──────┬───────────────┘
       │
       ▼
┌──────────────────────┐
│ Redirect to          │
│ Admin Dashboard      │
└──────────────────────┘
       │
       ▼
     End
```

### 2.2 Student Management Flow
```
┌─────────────────────────────────────────────────────────────┐
│                 STUDENT MANAGEMENT FLOW                      │
└─────────────────────────────────────────────────────────────┘

    Admin/Member Dashboard
           │
           ▼
    ┌──────────────┐
    │   Students   │
    │     Tab      │
    └──────┬───────┘
           │
           ├──────────────┬──────────────┬──────────────┐
           │              │              │              │
           ▼              ▼              ▼              ▼
    ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐
    │   View   │  │   Add    │  │  Edit    │  │  Delete  │
    │ Students │  │ Student  │  │ Student  │  │ Student  │
    └──────┬───┘  └────┬─────┘  └────┬─────┘  └────┬─────┘
           │           │              │              │
           ▼           ▼              ▼              ▼
    ┌──────────────────────────────────────────────────────┐
    │              studentStore Operations                  │
    ├──────────────────────────────────────────────────────┤
    │  getAll()    create()      update()      delete()    │
    └──────┬───────────┬──────────────┬──────────────┬─────┘
           │           │              │              │
           ▼           ▼              ▼              ▼
    ┌──────────────────────────────────────────────────────┐
    │              Supabase Database                        │
    ├──────────────────────────────────────────────────────┤
    │  SELECT     INSERT         UPDATE         DELETE     │
    │  FROM       INTO           students       FROM       │
    │  students   students       SET ...        students   │
    └──────┬───────────┬──────────────┬──────────────┬─────┘
           │           │              │              │
           ▼           ▼              ▼              ▼
    ┌──────────────────────────────────────────────────────┐
    │              Real-time Broadcast                      │
    └──────┬───────────┬──────────────┬──────────────┬─────┘
           │           │              │              │
           ▼           ▼              ▼              ▼
    ┌──────────────────────────────────────────────────────┐
    │         Update UI for All Connected Users             │
    └──────────────────────────────────────────────────────┘
```

### 2.3 Attendance Marking Flow
```
┌─────────────────────────────────────────────────────────────┐
│                  ATTENDANCE MARKING FLOW                     │
└─────────────────────────────────────────────────────────────┘

    Admin/Member Dashboard
           │
           ▼
    ┌──────────────┐
    │  Attendance  │
    │     Tab      │
    └──────┬───────┘
           │
           ▼
    ┌──────────────┐
    │ Select Date  │
    └──────┬───────┘
           │
           ▼
    ┌──────────────┐
    │Select Project│
    └──────┬───────┘
           │
           ▼
    ┌──────────────────────┐
    │ Load Students in     │
    │ Selected Project     │
    └──────┬───────────────┘
           │
           ▼
    ┌──────────────────────┐
    │ For Each Student:    │
    │ ○ Present            │
    │ ○ Absent             │
    │ ○ Absent with Reason │
    └──────┬───────────────┘
           │
           ▼
    ┌──────────────────────┐
    │ Add Comments         │
    │ (Optional)           │
    └──────┬───────────────┘
           │
           ▼
    ┌──────────────────────┐
    │ Submit Attendance    │
    └──────┬───────────────┘
           │
           ▼
    ┌──────────────────────┐
    │ attendanceStore      │
    │ .markAttendance()    │
    └──────┬───────────────┘
           │
           ▼
    ┌──────────────────────┐
    │ Check if already     │
    │ marked for date      │
    └──────┬───────────────┘
           │
           ├─── Exists ────► Update existing record
           │
           ▼ New
    ┌──────────────────────┐
    │ Insert into          │
    │ attendance table     │
    └──────┬───────────────┘
           │
           ▼
    ┌──────────────────────┐
    │ Create Notification  │
    └──────┬───────────────┘
           │
           ▼
    ┌──────────────────────┐
    │ Show Success Toast   │
    └──────┬───────────────┘
           │
           ▼
    ┌──────────────────────┐
    │ Refresh Attendance   │
    │ List                 │
    └──────────────────────┘
```

---

## 3. Database Schema Diagram

```
┌─────────────────────────────────────────────────────────────────────┐
│                      DATABASE SCHEMA (ERD)                           │
└─────────────────────────────────────────────────────────────────────┘

┌──────────────────────┐
│     admin_users      │
├──────────────────────┤
│ id (PK, UUID)        │
│ email (UNIQUE)       │
│ username (UNIQUE)    │
│ password_hash        │
│ role                 │
│ is_active            │
│ last_login           │
│ created_at           │
│ updated_at           │
└──────────────────────┘

┌──────────────────────┐         ┌──────────────────────┐
│      students        │         │      projects        │
├──────────────────────┤         ├──────────────────────┤
│ id (PK, UUID)        │         │ id (PK, UUID)        │
│ full_name            │         │ name                 │
│ email (UNIQUE)       │         │ description          │
│ phone                │         │ start_date           │
│ enrollment_date      │         │ end_date             │
│ status               │         │ status               │
│ added_by             │         │ created_by           │
│ added_by_email       │         │ created_at           │
│ created_at           │         │ updated_at           │
│ updated_at           │         └──────────────────────┘
└──────────────────────┘                    │
         │                                  │
         │                                  │
         │         ┌──────────────────────┐ │
         │         │  project_students    │ │
         │         ├──────────────────────┤ │
         └────────►│ id (PK, UUID)        │◄┘
                   │ project_id (FK)      │
                   │ student_id (FK)      │
                   │ assigned_date        │
                   │ created_at           │
                   └──────────────────────┘
                            │
                            │
         ┌──────────────────┴──────────────────┐
         │                                     │
         ▼                                     ▼
┌──────────────────────┐         ┌──────────────────────┐
│     attendance       │         │    requisitions      │
├──────────────────────┤         ├──────────────────────┤
│ id (PK, UUID)        │         │ id (PK, UUID)        │
│ student_id (FK)      │         │ title                │
│ project_id (FK)      │         │ description          │
│ date                 │         │ category             │
│ status               │         │ quantity             │
│ comment              │         │ estimated_cost       │
│ marked_by            │         │ priority             │
│ created_at           │         │ status               │
│ updated_at           │         │ submitted_by         │
└──────────────────────┘         │ submitted_date       │
                                 │ reviewed_by          │
                                 │ reviewed_date        │
                                 │ review_notes         │
                                 │ created_at           │
                                 │ updated_at           │
                                 └──────────────────────┘

┌──────────────────────┐         ┌──────────────────────┐
│  deletion_requests   │         │    team_members      │
├──────────────────────┤         ├──────────────────────┤
│ id (PK, UUID)        │         │ id (PK, UUID)        │
│ student_id           │         │ name                 │
│ student_name         │         │ role                 │
│ student_email        │         │ email (UNIQUE)       │
│ requested_by         │         │ phone                │
│ requested_by_email   │         │ bio                  │
│ reason               │         │ image_url            │
│ request_date         │         │ created_at           │
│ status               │         │ updated_at           │
│ admin_response       │         └──────────────────────┘
│ admin_email          │
│ response_date        │         ┌──────────────────────┐
│ created_at           │         │   notifications      │
│ updated_at           │         ├──────────────────────┤
└──────────────────────┘         │ id (PK, UUID)        │
                                 │ type                 │
                                 │ title                │
                                 │ message              │
                                 │ related_id           │
                                 │ is_read              │
                                 │ created_by           │
                                 │ created_at           │
                                 └──────────────────────┘

Legend:
PK  = Primary Key
FK  = Foreign Key
─►  = One-to-Many Relationship
◄─► = Many-to-Many Relationship (via junction table)
```

---

## 4. Component Interaction Diagram

```
┌─────────────────────────────────────────────────────────────────────┐
│                   COMPONENT INTERACTION FLOW                         │
└─────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────┐
│                         App.tsx                                   │
│  ┌────────────────────────────────────────────────────────────┐  │
│  │                    ThemeProvider                            │  │
│  │  ┌──────────────────────────────────────────────────────┐  │  │
│  │  │              LanguageProvider                         │  │  │
│  │  │  ┌────────────────────────────────────────────────┐  │  │  │
│  │  │  │           BrowserRouter                        │  │  │  │
│  │  │  │                                                 │  │  │  │
│  │  │  │  ┌──────────────────────────────────────────┐  │  │  │  │
│  │  │  │  │           Navbar                         │  │  │  │  │
│  │  │  │  │  - Logo                                  │  │  │  │  │
│  │  │  │  │  - Navigation Links                      │  │  │  │  │
│  │  │  │  │  - Theme Toggle                          │  │  │  │  │
│  │  │  │  │  - Language Selector                     │  │  │  │  │
│  │  │  │  └──────────────────────────────────────────┘  │  │  │  │
│  │  │  │                                                 │  │  │  │
│  │  │  │  ┌──────────────────────────────────────────┐  │  │  │  │
│  │  │  │  │           Routes                         │  │  │  │  │
│  │  │  │  │                                          │  │  │  │  │
│  │  │  │  │  Public Pages:                          │  │  │  │  │
│  │  │  │  │  ├─ Home                                │  │  │  │  │
│  │  │  │  │  ├─ About                               │  │  │  │  │
│  │  │  │  │  ├─ Services                            │  │  │  │  │
│  │  │  │  │  ├─ Events                              │  │  │  │  │
│  │  │  │  │  └─ Contact                             │  │  │  │  │
│  │  │  │  │                                          │  │  │  │  │
│  │  │  │  │  Admin Dashboard:                       │  │  │  │  │
│  │  │  │  │  ├─ DashboardHome                       │  │  │  │  │
│  │  │  │  │  ├─ ProjectsAdmin                       │  │  │  │  │
│  │  │  │  │  ├─ StudentsAdmin                       │  │  │  │  │
│  │  │  │  │  ├─ AttendanceAdmin                     │  │  │  │  │
│  │  │  │  │  ├─ RequisitionsAdmin                   │  │  │  │  │
│  │  │  │  │  ├─ MembersAdmin                        │  │  │  │  │
│  │  │  │  │  ├─ TeamMembersAdmin                    │  │  │  │  │
│  │  │  │  │  └─ DeletionRequestsAdmin               │  │  │  │  │
│  │  │  │  │                                          │  │  │  │  │
│  │  │  │  │  Member Portal:                         │  │  │  │  │
│  │  │  │  │  ├─ MemberDashboardHome                 │  │  │  │  │
│  │  │  │  │  ├─ MemberProjects                      │  │  │  │  │
│  │  │  │  │  ├─ MemberStudents                      │  │  │  │  │
│  │  │  │  │  ├─ MemberAttendance                    │  │  │  │  │
│  │  │  │  │  └─ MemberProfile                       │  │  │  │  │
│  │  │  │  └──────────────────────────────────────────┘  │  │  │  │
│  │  │  │                                                 │  │  │  │
│  │  │  │  ┌──────────────────────────────────────────┐  │  │  │  │
│  │  │  │  │           Footer                         │  │  │  │  │
│  │  │  │  │  - Links                                 │  │  │  │  │
│  │  │  │  │  - Social Media                          │  │  │  │  │
│  │  │  │  │  - Copyright                             │  │  │  │  │
│  │  │  │  └──────────────────────────────────────────┘  │  │  │  │
│  │  │  │                                                 │  │  │  │
│  │  │  │  ┌──────────────────────────────────────────┐  │  │  │  │
│  │  │  │  │      WhatsAppButton                      │  │  │  │  │
│  │  │  │  └──────────────────────────────────────────┘  │  │  │  │
│  │  │  │                                                 │  │  │  │
│  │  │  │  ┌──────────────────────────────────────────┐  │  │  │  │
│  │  │  │  │      Toaster (Notifications)             │  │  │  │  │
│  │  │  │  └──────────────────────────────────────────┘  │  │  │  │
│  │  │  └────────────────────────────────────────────────┘  │  │  │
│  │  └──────────────────────────────────────────────────────┘  │  │
│  └────────────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────────────┘
                                │
                                │ Uses
                                ▼
┌──────────────────────────────────────────────────────────────────┐
│                         Store Layer                               │
├──────────────────────────────────────────────────────────────────┤
│  studentStore  │  projectStore  │  attendanceStore  │  ...       │
└──────────────────────────────────────────────────────────────────┘
                                │
                                │ Calls
                                ▼
┌──────────────────────────────────────────────────────────────────┐
│                      Supabase Client                              │
├──────────────────────────────────────────────────────────────────┤
│  Database  │  Auth  │  Real-time  │  Storage                     │
└──────────────────────────────────────────────────────────────────┘
```

---

## 5. Deployment Diagram

```
┌─────────────────────────────────────────────────────────────────────┐
│                      DEPLOYMENT ARCHITECTURE                         │
└─────────────────────────────────────────────────────────────────────┘

                         ┌──────────────────┐
                         │   Developer      │
                         │   Workstation    │
                         └────────┬─────────┘
                                  │
                                  │ git push
                                  ▼
                         ┌──────────────────┐
                         │     GitHub       │
                         │   Repository     │
                         └────────┬─────────┘
                                  │
                                  │ Webhook
                                  ▼
┌────────────────────────────────────────────────────────────────────┐
│                         Vercel Platform                             │
├────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌──────────────────────────────────────────────────────────────┐ │
│  │                    Build Process                              │ │
│  ├──────────────────────────────────────────────────────────────┤ │
│  │  1. Clone Repository                                         │ │
│  │  2. Install Dependencies (npm install)                       │ │
│  │  3. TypeScript Compilation (tsc)                             │ │
│  │  4. Vite Build (vite build)                                  │ │
│  │  5. Asset Optimization                                       │ │
│  │  6. Generate Static Files                                    │ │
│  └──────────────────────────────────────────────────────────────┘ │
│                                │                                    │
│                                ▼                                    │
│  ┌──────────────────────────────────────────────────────────────┐ │
│  │                    Edge Network (CDN)                         │ │
│  ├──────────────────────────────────────────────────────────────┤ │
│  │  ┌────────────┐  ┌────────────┐  ┌────────────┐            │ │
│  │  │   US East  │  │  Europe    │  │   Asia     │  ...       │ │
│  │  │   Region   │  │  Region    │  │  Region    │            │ │
│  │  └────────────┘  └────────────┘  └────────────┘            │ │
│  │                                                               │ │
│  │  - Static Assets (HTML, CSS, JS, Images)                    │ │
│  │  - Automatic HTTPS/SSL                                       │ │
│  │  - DDoS Protection                                           │ │
│  │  - Automatic Scaling                                         │ │
│  └──────────────────────────────────────────────────────────────┘ │
│                                                                     │
└────────────────────────────────────────────────────────────────────┘
                                │
                                │ API Requests
                                ▼
┌────────────────────────────────────────────────────────────────────┐
│                       Supabase Platform                             │
├────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌──────────────────────────────────────────────────────────────┐ │
│  │                  PostgreSQL Database                          │ │
│  ├──────────────────────────────────────────────────────────────┤ │
│  │  - Primary Database                                          │ │
│  │  - Automatic Backups (Daily)                                 │ │
│  │  - Point-in-Time Recovery                                    │ │
│  │  - Connection Pooling                                        │ │
│  └──────────────────────────────────────────────────────────────┘ │
│                                                                     │
│  ┌──────────────────────────────────────────────────────────────┐ │
│  │                  Authentication Service                       │ │
│  ├──────────────────────────────────────────────────────────────┤ │
│  │  - JWT Token Management                                      │ │
│  │  - Password Hashing (bcrypt)                                 │ │
│  │  - Session Management                                        │ │
│  │  - OAuth Providers (optional)                                │ │
│  └──────────────────────────────────────────────────────────────┘ │
│                                                                     │
│  ┌──────────────────────────────────────────────────────────────┐ │
│  │                  Real-time Engine                             │ │
│  ├──────────────────────────────────────────────────────────────┤ │
│  │  - WebSocket Connections                                     │ │
│  │  - Database Change Streams                                   │ │
│  │  - Broadcast Channels                                        │ │
│  │  - Presence Tracking                                         │ │
│  └──────────────────────────────────────────────────────────────┘ │
│                                                                     │
│  ┌──────────────────────────────────────────────────────────────┐ │
│  │                  Storage Service                              │ │
│  ├──────────────────────────────────────────────────────────────┤ │
│  │  - File Upload/Download                                      │ │
│  │  - Image Transformation                                      │ │
│  │  - Access Control                                            │ │
│  │  - CDN Integration                                           │ │
│  └──────────────────────────────────────────────────────────────┘ │
│                                                                     │
└────────────────────────────────────────────────────────────────────┘
                                │
                                │ Responses
                                ▼
                         ┌──────────────────┐
                         │   End Users      │
                         │  (Web Browsers)  │
                         └──────────────────┘
```

---

## 6. Data Flow Sequence Diagram

### 6.1 Create Student Sequence
```
User          Component       Store           Supabase        Database
 │                │              │                │               │
 │  Fill Form    │              │                │               │
 │──────────────►│              │                │               │
 │                │              │                │               │
 │  Click Save   │              │                │               │
 │──────────────►│              │                │               │
 │                │              │                │               │
 │                │ create()     │                │               │
 │                │─────────────►│                │               │
 │                │              │                │               │
 │                │              │ INSERT query   │               │
 │                │              │───────────────►│               │
 │                │              │                │               │
 │                │              │                │ Execute SQL   │
 │                │              │                │──────────────►│
 │                │              │                │               │
 │                │              │                │ Validate RLS  │
 │                │              │                │◄──────────────│
 │                │              │                │               │
 │                │              │                │ Insert Row    │
 │                │              │                │──────────────►│
 │                │              │                │               │
 │                │              │                │ Return Data   │
 │                │              │                │◄──────────────│
 │                │              │                │               │
 │                │              │ Success        │               │
 │                │              │◄───────────────│               │
 │                │              │                │               │
 │                │              │ Broadcast      │               │
 │                │              │ Real-time      │               │
 │                │              │───────────────►│               │
 │                │              │                │               │
 │                │ Success      │                │               │
 │                │◄─────────────│                │               │
 │                │              │                │               │
 │  Show Toast   │              │                │               │
 │◄──────────────│              │                │               │
 │                │              │                │               │
 │  Refresh List │              │                │               │
 │◄──────────────│              │                │               │
 │                │              │                │               │
```

### 6.2 Real-time Update Sequence
```
User A        Component A    Supabase      Component B    User B
  │               │              │              │            │
  │  Update Data  │              │              │            │
  │──────────────►│              │              │            │
  │               │              │              │            │
  │               │ UPDATE query │              │            │
  │               │─────────────►│              │            │
  │               │              │              │            │
  │               │              │ Database     │            │
  │               │              │ Change       │            │
  │               │              │              │            │
  │               │              │ Broadcast    │            │
  │               │              │ Event        │            │
  │               │              │─────────────►│            │
  │               │              │              │            │
  │               │              │              │ Update UI  │
  │               │              │              │───────────►│
  │               │              │              │            │
  │  Show Toast   │              │              │ See Change │
  │◄──────────────│              │              │◄───────────│
  │               │              │              │            │
```

---

## 7. Security Architecture Diagram

```
┌─────────────────────────────────────────────────────────────────────┐
│                      SECURITY LAYERS                                 │
└─────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────┐
│  Layer 1: Network Security                                           │
├─────────────────────────────────────────────────────────────────────┤
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐             │
│  │  HTTPS/TLS   │  │     CORS     │  │     DDoS     │             │
│  │  Encryption  │  │  Protection  │  │  Protection  │             │
│  └──────────────┘  └──────────────┘  └──────────────┘             │
└─────────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────────┐
│  Layer 2: Authentication                                             │
├─────────────────────────────────────────────────────────────────────┤
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐             │
│  │  Supabase    │  │   Password   │  │     JWT      │             │
│  │    Auth      │  │   Hashing    │  │    Tokens    │             │
│  └──────────────┘  └──────────────┘  └──────────────┘             │
└─────────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────────┐
│  Layer 3: Authorization                                              │
├─────────────────────────────────────────────────────────────────────┤
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐             │
│  │     RBAC     │  │     RLS      │  │  Permission  │             │
│  │   (Roles)    │  │  Policies    │  │    Checks    │             │
│  └──────────────┘  └──────────────┘  └──────────────┘             │
└─────────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────────┐
│  Layer 4: Data Security                                              │
├─────────────────────────────────────────────────────────────────────┤
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐             │
│  │    Input     │  │      SQL     │  │     XSS      │             │
│  │  Validation  │  │  Injection   │  │  Protection  │             │
│  │              │  │  Prevention  │  │              │             │
│  └──────────────┘  └──────────────┘  └──────────────┘             │
└─────────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────────┐
│  Layer 5: Application Security                                       │
├─────────────────────────────────────────────────────────────────────┤
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐             │
│  │ Environment  │  │    Secure    │  │    Error     │             │
│  │  Variables   │  │   Storage    │  │   Handling   │             │
│  └──────────────┘  └──────────────┘  └──────────────┘             │
└─────────────────────────────────────────────────────────────────────┘
```

---

**Document Version:** 1.0
**Last Updated:** January 21, 2026
**Companion Document:** SYSTEM_ARCHITECTURE.md

---

*These diagrams provide visual representations of the IPRT system architecture. For detailed technical specifications, refer to SYSTEM_ARCHITECTURE.md.*
